<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-6 col-lg-5">
      <div class="card border-0 shadow-lg rounded-4 overflow-hidden">
        <div class="card-header bg-danger text-white text-center py-4">
          <h3 class="fw-bold mb-0">¡Únete a la Aventura!</h3>
          <small>Crea tu cuenta de Entrenador</small>
        </div>
        <div class="card-body p-4 p-md-5">
          <form (ngSubmit)="onSubmit()" #registerForm="ngForm">
            
            <div class="mb-3">
              <label class="form-label fw-bold text-secondary small">Nombre de Entrenador</label>
              <input type="text" class="form-control bg-light border-0" name="username" [(ngModel)]="user.username" required>
            </div>

            <div class="mb-3">
              <label class="form-label fw-bold text-secondary small">Correo Electrónico</label>
              <input type="email" class="form-control bg-light border-0" name="email" [(ngModel)]="user.email" required>
            </div>

            <div class="mb-3">
              <label class="form-label fw-bold text-secondary small">Contraseña</label>
              <input type="password" class="form-control bg-light border-2" 
                     [style.border-color]="strengthColor"
                     (input)="checkStrength()"
                     name="password" [(ngModel)]="user.password" required>
              
              <div class="d-flex justify-content-between align-items-center mt-2">
                <div class="progress flex-grow-1" style="height: 6px;">
                  <div class="progress-bar" [style.width.%]="passwordStrength" [style.background-color]="strengthColor"></div>
                </div>
                <span class="ms-2 small fw-bold" [style.color]="strengthColor">{{ strengthText }}</span>
              </div>

              <div class="mt-3 p-3 bg-light rounded-3 small">
                <p class="mb-2 fw-bold text-secondary border-bottom pb-1">Tu contraseña debe tener:</p>
                <div [class.text-success]="requirements.length" [class.text-muted]="!requirements.length">
                  <i class="bi" [ngClass]="requirements.length ? 'bi-check-circle-fill' : 'bi-circle'"></i> Al menos 8 caracteres
                </div>
                <div [class.text-success]="requirements.upper" [class.text-muted]="!requirements.upper">
                  <i class="bi" [ngClass]="requirements.upper ? 'bi-check-circle-fill' : 'bi-circle'"></i> Una letra mayúscula
                </div>
                <div [class.text-success]="requirements.lower" [class.text-muted]="!requirements.lower">
                  <i class="bi" [ngClass]="requirements.lower ? 'bi-check-circle-fill' : 'bi-circle'"></i> Una letra minúscula
                </div>
                <div [class.text-success]="requirements.number" [class.text-muted]="!requirements.number">
                  <i class="bi" [ngClass]="requirements.number ? 'bi-check-circle-fill' : 'bi-circle'"></i> Un número
                </div>
                <div [class.text-success]="requirements.special" [class.text-muted]="!requirements.special">
                  <i class="bi" [ngClass]="requirements.special ? 'bi-check-circle-fill' : 'bi-circle'"></i> Un símbolo (.,#@$)
                </div>
              </div>
            </div>

            <div class="mb-4">
              <label class="form-label fw-bold text-secondary small">Confirmar Contraseña</label>
              <input type="password" class="form-control bg-light border-0" name="confirmPassword" [(ngModel)]="user.confirmPassword" required>
              <small class="text-danger" *ngIf="user.password !== user.confirmPassword && user.confirmPassword">
                Las contraseñas no coinciden.
              </small>
            </div>

            <div class="d-grid">
              <button type="submit" class="btn btn-danger rounded-pill fw-bold py-2 shadow-sm"
                      [disabled]="!registerForm.form.valid || user.password !== user.confirmPassword || passwordStrength < 80 || cargando">
                Registrarse
              </button>
            </div>
          </form>

          <div *ngIf="errorMsg" class="alert alert-danger mt-3 text-center small">{{ errorMsg }}</div>
          <div *ngIf="successMsg" class="alert alert-success mt-3 text-center small">{{ successMsg }}</div>
        </div>
      </div>
    </div>
  </div>
</div>