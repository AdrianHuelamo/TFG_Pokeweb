<div class="register-container animate-fade-in">
  
  <div class="nintendo-ds">
    
    <div class="ds-screen-frame top-frame">
      <div class="screen top-screen">
        <div class="dialog-box animate-text">
          <p class="mb-0 fw-bold">
            ¡Hola! Soy el <b>Profesor Cañamo.</b> <br>
            ¡Rellena tu ficha de Entrenador en la pantalla táctil de abajo para comenzar!
          </p>
        </div>
      </div>
    </div>

    <div class="ds-hinge">
      <div class="hinge-barrel"></div>
      <div class="hinge-middle text-muted fw-bold">NINTENDO DS</div>
      <div class="hinge-barrel d-flex align-items-center justify-content-end px-2">
         <div class="power-light on"></div>
      </div>
    </div>

    <div class="ds-bottom-half">
      
      <div class="controls-left">
        <div class="d-pad">
          <div class="d-pad-h"></div>
          <div class="d-pad-v"></div>
          <div class="d-pad-center"></div>
        </div>
      </div>

      <div class="ds-screen-frame bottom-frame">
        <div class="screen bottom-screen">
          
          <form (ngSubmit)="onSubmit()" #registerForm="ngForm" class="p-2">
            <div class="mb-3">
              <label class="fw-bold text-secondary small text-uppercase">Nombre de Entrenador</label>
              <input type="text" class="form-control form-control-sm ds-input" 
                     placeholder="Ash Ketchum" name="username" [(ngModel)]="user.username" required>
            </div>

            <div class="mb-3">
              <label class="fw-bold text-secondary small text-uppercase">Poké-Email</label>
              <input type="email" class="form-control form-control-sm ds-input" 
                     placeholder="ash@pkmn.com" name="email" [(ngModel)]="user.email" required>
            </div>

            <div class="mb-2">
              <label class="fw-bold text-secondary small text-uppercase">Contraseña</label>
              <input type="password" class="form-control form-control-sm ds-input" 
                     [style.border-color]="strengthColor" (input)="checkStrength()"
                     name="password" [(ngModel)]="user.password" required>
              
              <div class="d-flex justify-content-around mt-1 req-indicators fw-bold">
                 <span [class.met]="requirements.upper">ABC</span>
                 <span [class.met]="requirements.lower">abc</span>
                 <span [class.met]="requirements.number">123</span>
                 <span [class.met]="requirements.special">#@$</span>
              </div>
            </div>

            <div class="mb-3">
              <label class="fw-bold text-secondary small text-uppercase">Confirmar</label>
              <input type="password" class="form-control form-control-sm ds-input" 
                     [style.border-color]="getConfirmColor()"
                     placeholder="Repite la contraseña"
                     name="confirmPassword" [(ngModel)]="user.confirmPassword" required>
              
              <small *ngIf="user.confirmPassword && user.password !== user.confirmPassword" 
                     class="text-danger fw-bold ms-1" style="font-size: 0.7rem;">
                 Las contraseñas no coinciden
              </small>
            </div>

            <button type="submit" class="btn btn-start"
                    [disabled]="!registerForm.form.valid || user.password !== user.confirmPassword || passwordStrength < 100 || cargando">
              <span *ngIf="!cargando">COMENZAR AVENTURA (START)</span>
              <span *ngIf="cargando">GUARDANDO DATOS...</span>
            </button>

            <div class="text-center mt-3">
              <a routerLink="/login" class="small text-danger text-decoration-none fw-bold login-link">
                VOLVER AL TÍTULO (LOGIN)
              </a>
            </div>

          </form>
           <div *ngIf="errorMsg" class="alert alert-danger mt-2 p-1 text-center small fw-bold">{{ errorMsg }}</div>
           <div *ngIf="successMsg" class="alert alert-success mt-2 p-1 text-center small fw-bold">{{ successMsg }}</div>
        </div>
      </div>

      <div class="controls-right">
        <div class="action-buttons">
          <div class="ds-btn btn-x">X</div>
          <div class="ds-btn btn-y">Y</div>
          <div class="ds-btn btn-a">A</div>
          <a routerLink="/login"><div class="ds-btn btn-b">B</div></a>
        </div>
        <div class="start-select">
          <div class="ss-btn">SELECT</div>
          <div class="ss-btn">START</div>
        </div>
      </div>

    </div> </div> </div>